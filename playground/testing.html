<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Morphing Point to Search Bar</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Wrapper */
    #searchWrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 15px;
      background: #f8f9fa;
      border-top: 1px solid #ddd;
      min-height: 60px;
    }

    /* Hidden initially */
    #searchBar {
      width: 0;
      height: 0;
      opacity: 0;
      border: none;
      outline: none;
      border-radius: 50%;
      background: #007bff;
      transition: all 0.6s cubic-bezier(0.25, 1, 0.3, 1);
      text-indent: -9999px;
      cursor: pointer;
    }

    /* Stage 1: point visible */
    #searchBar.dot {
      width: 20px;
      height: 20px;
      opacity: 1;
      border-radius: 50%;
      background: #007bff;
    }

    /* Stage 2: expanded into search bar */
    #searchBar.expanded {
      width: 60%;
      height: 40px;
      border-radius: 25px;
      background: #fff;
      border: 2px solid #007bff;
      padding: 0 15px;
      text-indent: 0;
      color: black;
      opacity: 1;
      cursor: text;
    }

    #searchBar.expanded::placeholder {
      color: #666;
      opacity: 0.7;
    }

    /* Go button (hidden by default) */
    #goBtn {
      display: none;
      margin-left: 8px;
      transition: opacity 0.3s ease;
    }

    /* Show only when expanded */
    #searchBar.expanded + #goBtn {
      display: inline-block;
      opacity: 1;
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">MySite</a>
    <button class="btn btn-outline-light" id="toggleSearch">
      Search
    </button>
  </div>
</nav>

<!-- Morphing Search Area -->
<div id="searchWrapper">
  <input type="text" id="searchBar" placeholder="Search...">
  <button class="btn btn-primary" id="goBtn">Go</button>
</div>

<script>
  const toggleBtn = document.getElementById('toggleSearch');
  const searchBar = document.getElementById('searchBar');

  let isOpen = false;

  toggleBtn.addEventListener('click', () => {
    if (!isOpen) {
      // Show dot first
      searchBar.classList.add('dot');
      
      // Expand automatically after small delay
      setTimeout(() => {
        searchBar.classList.add('expanded');
        searchBar.focus();
      }, 400);
      
      isOpen = true;
    } else {
      // Shrink back to dot
      searchBar.classList.remove('expanded');
      searchBar.blur();

      // After shrinking, hide completely
      setTimeout(() => {
        searchBar.classList.remove('dot');
      }, 400);

      isOpen = false;
    }
  });
</script>

</body>
</html>
